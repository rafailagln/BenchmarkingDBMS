\section{Evalutation}
\label{sec:experiments}

\subsection{Experimental Setup}
For our experiments, we used a server with Intel i5-3470 with 3.20GHz speed. It has 4 sockets with 1 thread per socket. 
It has also 128 KiB L1d, 128 KiB L1i, 1MiB L2 and 6MiB L3 cache. Due to the CPU architecture, we decided in our experiments to use 1-2-4 cores/threads, 
to test parallelization, because it does not support more threads per CPU.

Regarding the memory, it has 8GB DDR3 RAM. Specifically, it has 2 dims of 4 GB each with a speed of 1333 MHz and a width of 64 bits. 
About storage, it has an SSD drive with 120 GB capacity.




\subsection{Results}

In this chapter, we will present the experiments we conducted for each DBMS and analyze them. 
We chose to examine the behavior of systems with hot and cold cache memory and with the use of parallelism. 
Particularly in MongoDB, we deemed it worth comparing the performance of the Database in running UDFs using 
Pandas in Python and natively in MongoEngine (using regular expressions).

We also need to mention that measurements were made with different data volumes, 
from x1 to x128 (comparing cache until x32) from the initial size of the data, doubling each time the data (i.e., we have x1, x2, x4, ..., x128). 
In the following charts to better present the results and more clearly, we chose not to place all the measurements 
(however, all measurements are available for checking). Finally, each measurement is the average of 5 reputations.

\subsubsection{Cache}

\begin{figure}[!ht]
\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32},
	enlarge x limits=0.25,
	legend style={at={(0.25,0.96)}, anchor=north east}
]
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.0894) (x8, 0.5398) (x32, 1.8502)};
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.163) (x8, 0.55) (x32, 1.8902)};
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.0789392) (x8, 0.5766666) (x32, 2.2763508)};
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.0761492) (x8, 0.5691348) (x32, 2.2464764)};
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 0.3174) (x8, 2.1204) (x32, 8.3862)};
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 0.3136) (x8, 2.0708) (x32, 8.2184)};
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 0.3408) (x8, 1.4064) (x32, 4.8236)};
\addplot+ [bar width=0.3cm, ybar, color8!80!black, fill=color8, text=black] coordinates {(x1, 0.3514) (x8, 1.3822) (x32, 4.8488)};
\legend{Monet cold, Monet hot, Mongo cold, Mongo hot, PostgreSQL cold, PostgreSQL hot, Vertica cold, Vertica hot}
\end{axis}
\end{tikzpicture}
	\caption{311 (Cold/Hot cache)}
	\label{fig:311Cache}

\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32},
	enlarge x limits=0.25,
	legend style={at={(0.25,0.96)}, anchor=north east}
]
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.0916) (x8, 0.6466) (x32, 2.3126)};
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.1456) (x8, 0.6044) (x32, 2.2192)};
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.677313) (x8, 5.6778428) (x32, 22.3317652)};
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.6868898) (x8, 5.6655924) (x32, 22.2838622)};
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 0.2538) (x8, 1.7684) (x32, 6.7694)};
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 0.2516) (x8, 1.761) (x32, 7.0788)};
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 1.4508) (x8, 2.5364) (x32, 6.0396)};
\addplot+ [bar width=0.3cm, ybar, color8!80!black, fill=color8, text=black] coordinates {(x1, 1.4228) (x8, 2.4654) (x32, 6.3762)};
\legend{Monet cold, Monet hot, Mongo cold, Mongo hot, PostgreSQL cold, PostgreSQL hot, Vertica cold, Vertica hot}
\end{axis}
\end{tikzpicture}
	\caption{Weblogs (Cold/Hot cache)}
	\label{fig:WeblogsCache}
\end{figure}

\begin{figure}[!ht]
\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32},
	enlarge x limits=0.25,
	legend style={at={(0.25,0.96)}, anchor=north east}
]
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.3462) (x8, 1.9726) (x32, 7.4704)};
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.3582) (x8, 1.9938) (x32, 7.6168)};
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.7531588) (x8, 6.0448594) (x32, 23.745275)};
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.7451276) (x8, 6.4407102) (x32, 24.5975472)};
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 1.2028) (x8, 8.9658) (x32, 34.9936)};
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 1.1228) (x8, 8.3) (x32, 32.262)};
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 0.6754) (x8, 0.6784) (x32, 0.7644)};
\addplot+ [bar width=0.3cm, ybar, color8!80!black, fill=color8, text=black] coordinates {(x1, 0.6742) (x8, 0.7272) (x32, 0.765)};
\legend{Monet cold, Monet hot, Mongo cold, Mongo hot, PostgreSQL cold, PostgreSQL hot, Vertica cold, Vertica hot}
\end{axis}
\end{tikzpicture}
	\caption{Zillow 1 (Cold/Hot cache)}
	\label{fig:Zillow1Cache}

\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32},
	enlarge x limits=0.25,
	legend style={at={(0.25,0.96)}, anchor=north east}
]
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.5458) (x8, 3.882) (x32, 15.477)};
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.5362) (x8, 3.8562) (x32, 15.167)};
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 3.7440264) (x8, 30.6640318) (x32, 122.2530776)};
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 3.7367452) (x8, 30.5411994) (x32, 124.5240324)};
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 1.7184) (x8, 13.1098) (x32, 51.1124)};
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 1.6854) (x8, 12.8202) (x32, 50.4318)};
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 2.419) (x8, 10.7408) (x32, 28.8634)};
\addplot+ [bar width=0.3cm, ybar, color8!80!black, fill=color8, text=black] coordinates {(x1, 2.4372) (x8, 10.733) (x32, 28.7596)};
\legend{Monet cold, Monet hot, Mongo cold, Mongo hot, PostgreSQL cold, PostgreSQL hot, Vertica cold, Vertica hot}
\end{axis}
\end{tikzpicture}
	\caption{Zillow 2 (Cold/Hot cache)}
	\label{fig:Zillow2Cache}
\end{figure}


\subsubsection{Parallelization}

Starting off, we should mention again that the system we ran our experiments on consists of a 4-core processor with 1 thread per core. 
Thus, in our experiments to explore parallelism, we looked at differences between 1, 2, and 4 processes and threads. 
We chose this approach because we deemed it meaningless to use more processes/threads, as it would lead to the throttling of our machine. 
It would have been of interest to test the experiments on larger and more powerful machines and see if any differences arose 
and to what extent they are explained by the increased machine power, or to what extent the performance-to-implementation-cost ratio is satisfactory 
to make such changes.

Additionally, we consider it important to note that Python, for security reasons, allows only one thread to hold control of the Python interpreter. 
This is known as the Python Global Interpreter Lock or GIL. This is a mechanism in CPython, the default and most widely used implementation of the 
Python programming language, to ensure that only one thread executes Python bytecodes at a time. 
This lock is necessary because CPython's memory management is not thread-safe, meaning only one thread can be in a state of execution at any time. 
The impact of the GIL is not noticeable for developers running single-threaded programs, 
but it can be a performance bottleneck in CPU-bound and multi-threaded code. Suppose we want to write a program that needs to use multiple threads 
for maximum performance. In that case, we may consider using an alternative implementation of Python, such as Jython or IronPython, 
which do not have a GIL or use multiple processes instead of threads.\\\\

{\bfseries PostgreSQL}\\

Starting with PostgreSQL, we should mention that it implements parallelism at the process level. 
This means that it could theoretically utilize the capabilities of Python for parallelism (as we mentioned at the beginning of the chapter) 
since Python also implements parallelism at the process level. The parameters that we need to take into consideration in order to 
implement/activate parallelism are:
\begin{enumerate}
	\item $max\_worker\_processes$: the maximum number of background processes that the system can support.
	\item $max\_parallel\_workers\_per\_gather$: the maximum number of workers that can be started by a single Gather or Gather Merge node
	\item $max\_parallel\_workers$: the maximum number of workers that the system can support for parallel queries
	\item $max\_parallel\_maintenance\_workers$: the maximum number of parallel workers that a single utility command can start
\end{enumerate}
Also, the $dynamic\_shared\_memory\_type$ parameter should be enabled with the appropriate value, depending on the system that the DBMS is running on.

Below, we see the diagrams that show the results we had running the queries on 1, 2 and 4 cores.

\begin{figure}[!ht]
\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32, x128},
	enlarge x limits=0.18,
	legend style={at={(0.31,0.95)}, anchor=north east}
]
% \addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.161) (x8, 0.547) (x32, 1.9026) (x128, 7.4264)};
% \addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.1622) (x8, 0.5508) (x32, 1.8896) (x128, 7.3956)};
% \addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.163) (x8, 0.55) (x32, 1.8902) (x128, 7.417)};
% \addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.1608) (x8, 0.5416) (x32, 1.8808) (x128, 7.3984)};
% \addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 0.3176) (x8, 2.1764) (x32, 8.5206) (x128, 32.5684)};
% \addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 0.3198) (x8, 2.325) (x32, 8.5554) (x128, 31.7244)};
% \addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 0.356) (x8, 2.1926) (x32, 8.7202) (x128, 32.5684)};
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.161) (x8, 0.547) (x32, 1.9026) };
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.1622) (x8, 0.5508) (x32, 1.8896) };
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.163) (x8, 0.55) (x32, 1.8902) };
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.1608) (x8, 0.5416) (x32, 1.8808) };
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 0.3176) (x8, 2.1764) (x32, 8.5206) };
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 0.3198) (x8, 2.325) (x32, 8.5554) };
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 0.356) (x8, 2.1926) (x32, 8.7202) };
\legend{Monet 1 thread, Monet 2 thread, Monet 4 thread, Monet Sequential pipe,
PostgreSQL 1 process, PostgreSQL 2 process, PostgreSQL 4 process}
\end{axis}
\end{tikzpicture}
	\caption{311 (Parallelism)}
	\label{fig:311Parallelism}

\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32},
	enlarge x limits=0.18,
	legend style={at={(0.31,0.95)}, anchor=north east}
]
% \addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.146) (x8, 0.6052) (x32, 2.2292) (x128, 9.328)};
% \addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.1464) (x8, 0.6046) (x32, 2.2208) (x128, 9.6558)};
% \addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.1456) (x8, 0.6044) (x32, 2.2192) (x128, 9.4814)};
% \addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.1464) (x8, 0.6022) (x32, 2.1796) (x128, 9.1778)};
% \addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 0.2494) (x8, 1.7006) (x32, 6.6864) (x128, 25.4232)};
% \addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 0.2476) (x8, 1.7818) (x32, 6.7178) (x128, 26.367)};
% \addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 0.2432) (x8, 1.6964) (x32, 6.6638) (x128, 25.8148)};
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.146) (x8, 0.6052) (x32, 2.2292) };
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.1464) (x8, 0.6046) (x32, 2.2208) };
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.1456) (x8, 0.6044) (x32, 2.2192) };
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.1464) (x8, 0.6022) (x32, 2.1796) };
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 0.2494) (x8, 1.7006) (x32, 6.6864) };
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 0.2476) (x8, 1.7818) (x32, 6.7178) };
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 0.2432) (x8, 1.6964) (x32, 6.6638) };
\legend{Monet 1 thread, Monet 2 thread, Monet 4 thread, Monet Sequential pipe,
PostgreSQL 1 process, PostgreSQL 2 process, PostgreSQL 4 process}
\end{axis}
\end{tikzpicture}
	\caption{Weblogs (Parallelism)}
	\label{fig:WeblogsParallelism}
\end{figure}

\begin{figure}[!ht]
\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32},
	enlarge x limits=0.18,
	legend style={at={(0.31,0.95)}, anchor=north east}
]
% \addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.3454) (x8, 1.9884) (x32, 7.9144) (x128, 31.263)};
% \addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.3622) (x8, 2.0036) (x32, 7.6228) (x128, 30.8102)};
% \addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.3582) (x8, 1.9938) (x32, 7.6168) (x128, 30.754)};
% \addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.339) (x8, 1.9946) (x32, 7.6994) (x128, 30.8414)};
% \addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 1.1708) (x8, 8.6078) (x32, 33.6204) (x128, 132.1814)};
% \addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 1.1578) (x8, 8.6272) (x32, 33.4664) (x128, 132.8554)};
% \addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 1.1584) (x8, 8.3448) (x32, 32.577) (x128, 133.2398)};
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.3454) (x8, 1.9884) (x32, 7.9144) };
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.3622) (x8, 2.0036) (x32, 7.6228) };
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.3582) (x8, 1.9938) (x32, 7.6168) };
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.339) (x8, 1.9946) (x32, 7.6994) };
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 1.1708) (x8, 8.6078) (x32, 33.6204) };
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 1.1578) (x8, 8.6272) (x32, 33.4664) };
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 1.1584) (x8, 8.3448) (x32, 32.577) };
\legend{Monet 1 thread, Monet 2 thread, Monet 4 thread, Monet Sequential pipe,
PostgreSQL 1 process, PostgreSQL 2 process, PostgreSQL 4 process}
\end{axis}
\end{tikzpicture}
	\caption{Zillow1 (Parallelism)}
	\label{fig:Zillow1Parallelism}

\begin{tikzpicture}
\begin{axis}[
	symbolic x coords={x1, x8, x32},
	enlarge x limits=0.18,
	legend style={at={(0.31,0.95)}, anchor=north east}
]
% \addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.5304) (x8, 3.8512) (x32, 15.1888) (x128, 62.946)};
% \addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.5506) (x8, 3.86) (x32, 15.2562) (x128, 62.6158)};
% \addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.5362) (x8, 3.8562) (x32, 15.167) (x128, 63.015)};
% \addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.539) (x8, 3.8672) (x32, 15.1864) (x128, 62.7628)};
% \addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 1.7136) (x8, 13.0884) (x32, 51.5364) (x128, 202.3072)};
% \addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 1.6276) (x8, 12.6266) (x32, 49.7454) (x128, 205.8864)};
% \addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 1.6186) (x8, 12.5826) (x32, 49.3152) (x128, 200.7306)};
\addplot+ [bar width=0.3cm, ybar, color1!80!black, fill=color1, text=black] coordinates {(x1, 0.5304) (x8, 3.8512) (x32, 15.1888) };
\addplot+ [bar width=0.3cm, ybar, color2!80!black, fill=color2, text=black] coordinates {(x1, 0.5506) (x8, 3.86) (x32, 15.2562) };
\addplot+ [bar width=0.3cm, ybar, color3!80!black, fill=color3, text=black] coordinates {(x1, 0.5362) (x8, 3.8562) (x32, 15.167) };
\addplot+ [bar width=0.3cm, ybar, color4!80!black, fill=color4, text=black] coordinates {(x1, 0.539) (x8, 3.8672) (x32, 15.1864) };
\addplot+ [bar width=0.3cm, ybar, color5!80!black, fill=color5, text=black] coordinates {(x1, 1.7136) (x8, 13.0884) (x32, 51.5364) };
\addplot+ [bar width=0.3cm, ybar, color6!80!black, fill=color6, text=black] coordinates {(x1, 1.6276) (x8, 12.6266) (x32, 49.7454) };
\addplot+ [bar width=0.3cm, ybar, color7!80!black, fill=color7, text=black] coordinates {(x1, 1.6186) (x8, 12.5826) (x32, 49.3152) };
\legend{Monet 1 thread, Monet 2 thread, Monet 4 thread, Monet Sequential pipe,
PostgreSQL 1 process, PostgreSQL 2 process, PostgreSQL 4 process}
\end{axis}
\end{tikzpicture}
	\caption{Zillow2 (Parallelism)}
	\label{fig:Zillow2Parallelism}
\end{figure}


{\bfseries MonetDB}
	